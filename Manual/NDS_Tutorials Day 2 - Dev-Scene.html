<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" dir="ltr" lang="en"><head><script src="NDS_Tutorials%20Day%202%20-%20Dev-Scene_files/analytics.js" type="text/javascript"></script>
<script type="text/javascript">window.addEventListener('DOMContentLoaded',function(){var v=archive_analytics.values;v.service='wb';v.server_name='wwwb-app12.us.archive.org';v.server_ms=1262;archive_analytics.send_pageview({});});</script><script type="text/javascript" src="NDS_Tutorials%20Day%202%20-%20Dev-Scene_files/wbhack.js" charset="utf-8"></script>

<script type="text/javascript">
__wbhack.init('http://web.archive.org/web');
</script>
<link rel="stylesheet" type="text/css" href="NDS_Tutorials%20Day%202%20-%20Dev-Scene_files/banner-styles.css">
<link rel="stylesheet" type="text/css" href="NDS_Tutorials%20Day%202%20-%20Dev-Scene_files/iconochive.css">

<!-- End Wayback Rewrite JS Include -->
<meta name="verify-v1" content="JdElwy5O2mxgh/HmWqKbqKxmx0NTTDzGEY+B528k9aU=">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
			<meta name="keywords" content="NDS/Tutorials Day 2,DevkitPro,NDS/NDS Tutorials VramTable,NDS/Tutorials Day 1,NDS Tutorials Day 1,Passthrough,NDS Flashme Guide,DSWifiDemos,WinterMute">
		<link rel="shortcut icon" href="http://web.archive.org/web/20101215215139im_/http://dev-scene.com/favicon.ico">
		<link rel="search" type="application/opensearchdescription+xml" href="http://web.archive.org/web/20101215215139/http://dev-scene.com/opensearch_desc.php" title="Dev-Scene (English)">
	<title>NDS/Tutorials Day 2 - Dev-Scene</title>
	<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "/web/20101215215139cs_/http://dev-scene.com/skins/cavendish/main.css"; /*]]>*/</style>
	<link rel="stylesheet" type="text/css" media="print" href="NDS_Tutorials%20Day%202%20-%20Dev-Scene_files/commonPrint.css">
	<script type="text/javascript" src="NDS_Tutorials%20Day%202%20-%20Dev-Scene_files/index.php"></script>		<style type="text/css">/*<![CDATA[*/
@import "/web/20101215215139cs_/http://dev-scene.com/index.php?title=MediaWiki:Common.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "/web/20101215215139cs_/http://dev-scene.com/index.php?title=MediaWiki:Cavendish.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "/web/20101215215139cs_/http://dev-scene.com/index.php?title=-&action=raw&gen=css&maxage=18000";
/*]]>*/</style>		

</head>
<body class="ns-0"><div id="wm-ipp" style="display: block; direction: ltr;" class="" lang="en">
<div style="position:fixed;left:0;top:0;right:0;">
<div id="wm-ipp-inside">
  <div style="position:relative;">
    <div id="wm-logo" style="float:left;width:130px;padding-top:10px;">
      <a href="http://web.archive.org/web/" title="Wayback Machine home page"><img src="NDS_Tutorials%20Day%202%20-%20Dev-Scene_files/wayback-toolbar-logo.png" alt="Wayback Machine" height="39" width="110" border="0"></a>
    </div>
    <div class="r" style="float:right;">
      <div id="wm-btns" style="text-align:right;height:25px;">
                  <div id="wm-save-snapshot-success">success</div>
          <div id="wm-save-snapshot-fail">fail</div>
          <a href="#" onclick="__wm.saveSnapshot('http://dev-scene.com/NDS/Tutorials_Day_2', '20101215215139')" title="Share via My Web Archive" id="wm-save-snapshot-open" style="display: none;">
            <span class="iconochive-web"></span>
          </a>
          <a href="https://archive.org/account/login.php" title="Sign In" id="wm-sign-in" style="display: inline-block;">
            <span class="iconochive-person"></span>
          </a>
          <span id="wm-save-snapshot-in-progress" class="iconochive-web" style="display: none;"></span>
        	<a href="http://faq.web.archive.org/" title="Get some help using the Wayback Machine" style="top:-6px;"><span class="iconochive-question" style="color:rgb(87,186,244);font-size:160%;"></span></a>
	<a id="wm-tb-close" href="#close" onclick="__wm.h(event);return false;" style="top:-2px;" title="Close the toolbar"><span class="iconochive-remove-circle" style="color:#888888;font-size:240%;"></span></a>
      </div>
      <div id="wm-share" style="text-align:right;">
	<a href="#" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=http://web.archive.org/web/20101215215139/http://dev-scene.com/NDS/Tutorials_Day_2', '', 'height=400,width=600'); return false;" title="Share on Facebook" style="margin-right:5px;" target="_blank"><span class="iconochive-facebook" style="color:#3b5998;font-size:160%;"></span></a>
	<a href="#" onclick="window.open('https://twitter.com/intent/tweet?text=http://web.archive.org/web/20101215215139/http://dev-scene.com/NDS/Tutorials_Day_2&amp;via=internetarchive', '', 'height=400,width=600'); return false;" title="Share on Twitter" style="margin-right:5px;" target="_blank"><span class="iconochive-twitter" style="color:#1dcaff;font-size:160%;"></span></a>
      </div>
    </div>
    <table class="c" style="">
      <tbody>
	<tr>
	  <td class="u" colspan="2">
	    <form target="_top" method="get" action="/web/submit" name="wmtb" id="wmtb"><input name="url" id="wmtbURL" value="http://dev-scene.com/NDS/Tutorials_Day_2" onfocus="this.focus();this.select();" autocomplete="off" type="text"><input name="type" value="replay" type="hidden"><input name="date" value="20101215215139" type="hidden"><input value="Go" type="submit"></form>
	  </td>
	  <td class="n" rowspan="2" style="width:110px;">
	    <table>
	      <tbody>
		<!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
		<tr class="m">
		  <td class="b" nowrap="nowrap"><a href="http://web.archive.org/web/20101011195706/http://dev-scene.com/NDS/Tutorials_Day_2" title="11 Oct 2010"><strong>Oct</strong></a></td>
		  <td class="c" id="displayMonthEl" title="You are here: 21:51:39 Dec 15, 2010">Dec</td>
		  <td class="f" nowrap="nowrap"><a href="http://web.archive.org/web/20110623115917/http://dev-scene.com:80/NDS/Tutorials_Day_2" title="23 Jun 2011"><strong>Jun</strong></a></td>
		</tr>
		<!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
		<tr class="d">
		  <td class="b" nowrap="nowrap"><a href="http://web.archive.org/web/20101123060754/http://dev-scene.com/NDS/Tutorials_Day_2" title="06:07:54 Nov 23, 2010"><img src="NDS_Tutorials%20Day%202%20-%20Dev-Scene_files/wm_tb_prv_on.png" alt="Previous capture" height="16" width="14" border="0"></a></td>
		  <td class="c" id="displayDayEl" style="width:34px;font-size:24px;white-space:nowrap;" title="You are here: 21:51:39 Dec 15, 2010">15</td>
		  <td class="f" nowrap="nowrap"><a href="http://web.archive.org/web/20101230015028/http://dev-scene.com/NDS/Tutorials_Day_2" title="01:50:28 Dec 30, 2010"><img src="NDS_Tutorials%20Day%202%20-%20Dev-Scene_files/wm_tb_nxt_on.png" alt="Next capture" height="16" width="14" border="0"></a></td>
		</tr>
		<!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
		<tr class="y">
		  <td class="b" nowrap="nowrap"><a href="http://web.archive.org/web/20090611123505/http://www.dev-scene.com:80/NDS/Tutorials_Day_2" title="11 Jun 2009"><strong>2009</strong></a></td>
		  <td class="c" id="displayYearEl" title="You are here: 21:51:39 Dec 15, 2010">2010</td>
		  <td class="f" nowrap="nowrap"><a href="http://web.archive.org/web/20111220053614/http://www.dev-scene.com:80/NDS/Tutorials_Day_2" title="20 Dec 2011"><strong>2011</strong></a></td>
		</tr>
	      </tbody>
	    </table>
	  </td>
	</tr>
	<tr>
	  <td class="s">
	    	    <div id="wm-nav-captures"><a class="t" href="http://web.archive.org/web/*/http://dev-scene.com/NDS/Tutorials_Day_2" title="See a list of every capture for this URL">73 captures</a><div class="r" title="Timespan for captures of this URL">7 Nov 2006 - 20 Dec 2017</div></div>
	  </td>
	  <td class="k">
	    <a href="http://web.archive.org/web/20120315000000/http://dev-scene.com/NDS/Tutorials_Day_2" id="wm-graph-anchor">
	      <div id="wm-ipp-sparkline" title="Explore captures for this URL" style="position: relative">
		<canvas id="wm-sparkline-canvas" width="575" height="27" border="0"></canvas>
	      <div class="yt" style="display: none; width: 25px; height: 27px; left: 400px;"></div><div class="mt" style="display: none; width: 2px; height: 27px; left: 405px;"></div></div>
	    </a>
	  </td>
	</tr>
      </tbody>
    </table>
    <div style="position:absolute;bottom:0;right:2px;text-align:right;">
      <a id="wm-expand" class="wm-btn wm-closed" href="#expand" onclick="__wm.ex(event);return false;"><span id="wm-expand-icon" class="iconochive-down-solid"></span> <span style="font-size:80%">About this capture</span></a>
    </div>
  </div>
    <div id="wm-capinfo" style="border-top:1px solid #777;display:none; overflow: hidden">
            <div style="background-color:#666;color:#fff;font-weight:bold;text-align:center">COLLECTED BY</div>
    <div style="padding:3px;position:relative" id="wm-collected-by-content">
            <div style="display:inline-block;vertical-align:top;width:50%;">
			<span class="c-logo" style="background-image:url(https://archive.org/services/img/webwidecrawl);"></span>
		Organization: <a style="color:#33f;" href="https://archive.org/details/webwidecrawl" target="_new"><span class="wm-title">Internet Archive</span></a>
		<div style="max-height:75px;overflow:hidden;position:relative;">
	  <div style="position:absolute;top:0;left:0;width:100%;height:75px;background:linear-gradient(to bottom,rgba(255,255,255,0) 0%,rgba(255,255,255,0) 90%,rgba(255,255,255,255) 100%);"></div>
	  The Internet Archive discovers and captures web pages through many different web crawls.

At any given time several distinct crawls are running, some for months, and some every day or longer.

View the web archive through the <a href="http://archive.org/web/web.php">Wayback Machine</a>.
	</div>
	      </div>
      <div style="display:inline-block;vertical-align:top;width:49%;">
			<span class="c-logo" style="background-image:url(https://archive.org/services/img/wide00001)"></span>
		<div>Collection: <a style="color:#33f;" href="https://archive.org/details/wide00001" target="_new"><span class="wm-title">Wide Crawl started October 2010</span></a></div>
		<div style="max-height:75px;overflow:hidden;position:relative;">
	  <div style="position:absolute;top:0;left:0;width:100%;height:75px;background:linear-gradient(to bottom,rgba(255,255,255,0) 0%,rgba(255,255,255,0) 90%,rgba(255,255,255,255) 100%);"></div>
	  Web wide crawl with initial seedlist and crawler configuration from October 2010
	</div>
	      </div>
    </div>
    <div style="background-color:#666;color:#fff;font-weight:bold;text-align:center" title="Timestamps for the elements of this page">TIMESTAMPS</div>
    <div>
      <div id="wm-capresources" style="margin:0 5px 5px 5px;max-height:250px;overflow-y:scroll !important"></div>
      <div id="wm-capresources-loading" style="text-align:left;margin:0 20px 5px 5px;display:none"><img src="NDS_Tutorials%20Day%202%20-%20Dev-Scene_files/loading.gif" alt="loading"></div>
    </div>
  </div></div></div></div><!-- BEGIN WAYBACK TOOLBAR INSERT -->
<script type="text/javascript" src="NDS_Tutorials%20Day%202%20-%20Dev-Scene_files/timestamp.js" charset="utf-8"></script>
<script type="text/javascript" src="NDS_Tutorials%20Day%202%20-%20Dev-Scene_files/graph-calc.js" charset="utf-8"></script>
<script type="text/javascript" src="NDS_Tutorials%20Day%202%20-%20Dev-Scene_files/auto-complete.js" charset="utf-8"></script>
<script type="text/javascript" src="NDS_Tutorials%20Day%202%20-%20Dev-Scene_files/toolbar.js" charset="utf-8"></script>

<style type="text/css">
body {
  margin-top:0 !important;
  padding-top:0 !important;
  /*min-width:800px !important;*/
}
.wb-autocomplete-suggestions {
    text-align: left; cursor: default; border: 1px solid #ccc; border-top: 0; background: #fff; box-shadow: -1px 1px 3px rgba(0,0,0,.1);
    position: absolute; display: none; z-index: 2147483647; max-height: 254px; overflow: hidden; overflow-y: auto; box-sizing: border-box;
}
.wb-autocomplete-suggestion { position: relative; padding: 0 .6em; line-height: 23px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-size: 1.02em; color: #333; }
.wb-autocomplete-suggestion b { font-weight: bold; }
.wb-autocomplete-suggestion.selected { background: #f0f0f0; }
</style>
<script type="text/javascript">
__wm.bt(575,27,25,2,"web","http://dev-scene.com/NDS/Tutorials_Day_2","2010-12-15",1996);
</script><div class="wb-autocomplete-suggestions "></div>
<!-- END WAYBACK TOOLBAR INSERT -->

<div id="internal"></div>
<div id="container">


		<div id="header">
		<a name="top" id="contentTop"></a>
		<h1><a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/Main_Page" title="Main Page">NDS/Tutorials Day 2</a></h1>
		<ul>
		   	<li class="selected"><a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/NDS/Tutorials_Day_2">Article</a></li><li><a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/Talk:NDS/Tutorials_Day_2">Discussion</a></li><li><a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/index.php?title=NDS/Tutorials_Day_2&amp;action=edit">Edit</a></li><li><a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/index.php?title=NDS/Tutorials_Day_2&amp;action=history">History</a></li>		</ul>


		<form name="searchform" action="/web/20101215215139/http://dev-scene.com/Special:Search" id="search">
			<div>
			<label for="q">Search</label>
			<input id="q" name="search" accesskey="f" type="text">
			<input name="go" class="searchButton" id="searchGoButton" value="Go" type="submit">&nbsp;<input name="fulltext" class="searchButton" value="Search" type="submit">
	       </div>
		</form>
	</div>

	<div id="mBody">
	
		<div id="side">



<ul id="nav">
	<li><span>Dev-Scene</span>
					<ul>
					<li id="n-Main_Page"><a href="http://web.archive.org/web/20101215215139/http://www.dev-scene.com/">Home</a></li>
					<li id="n-Dev-Scene_News"><a href="http://web.archive.org/web/20101215215139/http://www.dev-scene.com/News">News</a></li>
					<li id="n-Dev-Scene_forum"><a href="http://web.archive.org/web/20101215215139/http://forum.dev-scene.com/">Forum</a></li>
					<li id="n-Dev-Scene_blogs"><a href="http://web.archive.org/web/20101215215139/http://blog.dev-scene.com/">Blogs</a></li>
					<li id="n-Dev-Scene_planet"><a href="http://web.archive.org/web/20101215215139/http://planet.dev-scene.com/">Planet</a></li>
					<li id="n-Dev-Scene_library"><a href="http://web.archive.org/web/20101215215139/http://library.dev-scene.com/">Library</a></li>
					</ul>
		</li>
</ul>
<center><span class="plainlinks"><a href="http://web.archive.org/web/20101215215139/http://whos.amung.us/show/fuq6x1vd"><img src="NDS_Tutorials%20Day%202%20-%20Dev-Scene_files/fuq6x1vd.png" alt="counter" height="29" width="81" border="0"></a></span></center>
			<ul id="nav">
				<li>	
				<span>Navigation</span>
			<ul>
				<li id="n-Nintendo-DS"><a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/NDS">Nintendo DS</a></li>
				<li id="n---NDS-Homebrew-Catalog"><a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/NDS/Homebrew_Catalog">- NDS Homebrew Catalog</a></li>
				<li id="n-Nintendo-Wii"><a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/Wii">Nintendo Wii</a></li>
				<li id="n---Wii-Homebrew-Catalog"><a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/Wii/Homebrew_Catalog">- Wii Homebrew Catalog</a></li>
				<li id="n-currentevents"><a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/Current_events">Current events</a></li>
				<li id="n-portal"><a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/Dev-Scene:Community_Portal">Community portal</a></li>
				<li id="n-Developers/Donations"><a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/Developers">Developers/Donations</a></li>
			</ul>
	
	

			</li>
				<li><span>Personal tools</span>
					<ul>
					<li id="pt-login"><a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/index.php?title=Special:Userlogin&amp;returnto=NDS/Tutorials_Day_2">Log in / create account</a></li>					</ul>
				</li>
				<li><span>Toolbox</span>
					<ul>
					<li><a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/Special:Random">Random page</a></li>
<li><a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/Special:Recentchanges">Recent changes</a></li>
<li><a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/Help:Contents">Help</a></li>
					  					  <li id="t-whatlinkshere"><a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/Special:Whatlinkshere/NDS/Tutorials_Day_2">What links here</a></li>
					  				  
				      				      				      				      				      				      <li id="t-upload"><a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/Special:Upload">Upload file</a></li>				      				      <li id="t-specialpages"><a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/Special:Specialpages">Special pages</a></li>				      					 
					</ul>
				</li>
			</ul>
<span class="plainlinks"><center><a href="http://web.archive.org/web/20101215215139/http://www.electrobee.com/index.php?ref=5&amp;affiliate_banner_id=2" target="_blank"><img src="NDS_Tutorials%20Day%202%20-%20Dev-Scene_files/affiliate_show_banner.gif" alt="electrobee Banner" border="0"></a><br><a href="http://web.archive.org/web/20101215215139/http://www.gp2xstore.com/idevaffiliate/idevaffiliate.php?id=113_0_1_9" target="_blank"><img src="NDS_Tutorials%20Day%202%20-%20Dev-Scene_files/Gp2xstore_ad1.gif" height="320" width="160" border="0"></a></center></span></div><!-- end of SIDE div --><div id="mainContent">
<script type="text/javascript"><!--
google_ad_client = "pub-3502926109885944";
google_ad_width = 728;
google_ad_height = 90;
google_ad_format = "728x90_as";
google_ad_type = "text_image";
//2007-05-22: Dev-Scene
google_ad_channel = "2197235294";
google_color_border = "FFFFFF";
google_color_bg = "FFFFFF";
google_color_link = "0000FF";
google_color_text = "000000";
google_color_url = "008000";
//-->
</script>
<script type="text/javascript" src="NDS_Tutorials%20Day%202%20-%20Dev-Scene_files/show_ads.js">
</script><script src="NDS_Tutorials%20Day%202%20-%20Dev-Scene_files/show_ads_impl.js"></script><h1>
NDS/Tutorials Day 2</h1><h3 id="siteSub">From Dev-Scene</h3><div id="contentSub"><span class="subpages">&lt; <a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/NDS" title="NDS">NDS</a></span></div>
									<!-- start content -->
			<table id="toc" class="toc" summary="Contents"><tbody><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#Hardware_Overview"><span class="tocnumber">1</span> <span class="toctext">Hardware Overview</span></a>
<ul>
<li class="toclevel-2"><a href="#Memory_Layout"><span class="tocnumber">1.1</span> <span class="toctext">Memory Layout</span></a>
<ul>
<li class="toclevel-3"><a href="#Main_Memory"><span class="tocnumber">1.1.1</span> <span class="toctext">Main Memory</span></a></li>
<li class="toclevel-3"><a href="#ARM_7_Fast_Ram_.28IWRAM.29"><span class="tocnumber">1.1.2</span> <span class="toctext">ARM 7 Fast Ram (IWRAM)</span></a></li>
<li class="toclevel-3"><a href="#ARM_9_Caches"><span class="tocnumber">1.1.3</span> <span class="toctext">ARM 9 Caches</span></a></li>
<li class="toclevel-3"><a href="#Fast_Shared_Ram"><span class="tocnumber">1.1.4</span> <span class="toctext">Fast Shared Ram</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Video_Ram"><span class="tocnumber">1.2</span> <span class="toctext">Video Ram</span></a></li>
<li class="toclevel-2"><a href="#Virtual_Video_Ram"><span class="tocnumber">1.3</span> <span class="toctext">Virtual Video Ram</span></a></li>
<li class="toclevel-2"><a href="#Sound_Hardware"><span class="tocnumber">1.4</span> <span class="toctext">Sound Hardware</span></a></li>
<li class="toclevel-2"><a href="#Wifi"><span class="tocnumber">1.5</span> <span class="toctext">Wifi</span></a></li>
<li class="toclevel-2"><a href="#Input"><span class="tocnumber">1.6</span> <span class="toctext">Input</span></a>
<ul>
<li class="toclevel-3"><a href="#Touch_Screen"><span class="tocnumber">1.6.1</span> <span class="toctext">Touch Screen</span></a></li>
<li class="toclevel-3"><a href="#Buttons"><span class="tocnumber">1.6.2</span> <span class="toctext">Buttons</span></a></li>
<li class="toclevel-3"><a href="#Microphone"><span class="tocnumber">1.6.3</span> <span class="toctext">Microphone</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Real-Time_Clock"><span class="tocnumber">1.7</span> <span class="toctext">Real-Time Clock</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Upgradeable_Firmware"><span class="tocnumber">2</span> <span class="toctext">Upgradeable Firmware</span></a></li>
<li class="toclevel-1"><a href="#Graphics_Overview"><span class="tocnumber">3</span> <span class="toctext">Graphics Overview</span></a>
<ul>
<li class="toclevel-2"><a href="#2D"><span class="tocnumber">3.1</span> <span class="toctext">2D</span></a></li>
<li class="toclevel-2"><a href="#3D"><span class="tocnumber">3.2</span> <span class="toctext">3D</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Toolchain_Explained"><span class="tocnumber">4</span> <span class="toctext">Toolchain Explained</span></a>
<ul>
<li class="toclevel-2"><a href="#Compiler"><span class="tocnumber">4.1</span> <span class="toctext">Compiler</span></a></li>
<li class="toclevel-2"><a href="#Linker"><span class="tocnumber">4.2</span> <span class="toctext">Linker</span></a></li>
<li class="toclevel-2"><a href="#Build_A_Demo_The_Hard_Way"><span class="tocnumber">4.3</span> <span class="toctext">Build A Demo The Hard Way</span></a></li>
<li class="toclevel-2"><a href="#Conclusion"><span class="tocnumber">4.4</span> <span class="toctext">Conclusion</span></a></li>
</ul>
</li>
</ul>
</td></tr></tbody></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<a name="Hardware_Overview"></a><h2><span class="editsection">[<a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/index.php?title=NDS/Tutorials_Day_2&amp;action=edit&amp;section=1" title="Edit section: Hardware Overview">edit</a>]</span> <span class="mw-headline"><b>Hardware Overview</b></span></h2>
<p>The Nintendo DS is rich in features.  It possesses one of the most 
advanced 2D rendering systems ever seen on a console system, abundant 
memory resources (many, many times that of the <a href="http://web.archive.org/web/20101215215139/http://en.wikipedia.org/wiki/Snes" class="external text" title="http://en.wikipedia.org/wiki/Snes" rel="nofollow">SNES</a>), dual processors capable of outperforming the <a href="http://web.archive.org/web/20101215215139/http://en.wikipedia.org/wiki/Nintendo_64" class="external text" title="http://en.wikipedia.org/wiki/Nintendo_64" rel="nofollow">Nintendo 64</a> (<a href="http://web.archive.org/web/20101215215139/http://en.wikipedia.org/wiki/Floating_point" class="external text" title="http://en.wikipedia.org/wiki/Floating_point" rel="nofollow">floating point</a>
 operations aside), integrated wireless networking, a modest 3D system 
with easy to understand interface, a microphone, and touch pad input.
</p><p>What follows is a brief description of these features and a 
foreshadowing of the things you might accomplish with the knowledge 
gained in this guide.
</p>
<a name="Memory_Layout"></a><h3><span class="editsection">[<a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/index.php?title=NDS/Tutorials_Day_2&amp;action=edit&amp;section=2" title="Edit section: Memory Layout">edit</a>]</span> <span class="mw-headline">Memory Layout</span></h3>
<p>The memory footprint of the Nintendo DS is one of its more 
intimidating features for newly introduced console programmers.  
Understanding where memory is and what its uses are is key to getting 
the most from your applications and in many cases it is key to doing 
anything at all.  Often a picture can be helpful in understanding how 
memory is arranged.  
</p>
<center><a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/Image:Dov_DS_MemoryMap.png" class="image" title="Image:Dov_DS_MemoryMap.png"><img alt="Image:Dov_DS_MemoryMap.png" longdesc="/Image:Dov_DS_MemoryMap.png" src="NDS_Tutorials%20Day%202%20-%20Dev-Scene_files/Dov_DS_MemoryMap.html" height="996" width="736"></a>
<p>(Unless otherwise stated the data width for each bus is 16 bits.)
</p>
</center>
<p>The table below depicts both how these pieces of memory are physically addressed and their actual sizes.
</p>
<center>
<table class="dovstable">
      <caption>Memory Map</caption>
  
       <tbody><tr><th colspan="5" class="innerHeader">ARM 9</th></tr>
      <tr style="bold">
        <td class="dtName">Name</td>
        <td class="dtStart">Start Address</td>
        <td class="dtStop">Stop Address</td>
        <td class="dtSize">Size</td>
        <td class="dtWaitState">Wait State</td>
      </tr>
 
      <tr>
        <td class="dtName">Main</td>
        <td class="dtStart">0x02000000</td>
        <td class="dtStop">0x023FFFFF</td>
        <td class="dtSize">4MB</td>
        <td class="dtWaitState">?</td>
       </tr>
 
      <tr>
        <td class="dtName">BIOS</td>
        <td class="dtStart">0xFFFF0000</td>
        <td class="dtStop">0xFFFF7FFF</td>
        <td class="dtSize">32KB</td>
        <td class="dtWaitState">?</td>
       </tr>

       <tr>
        <td class="dtName">ITCM</td>
        <td class="dtStart">0x00000000</td>
        <td class="dtStop">0x00007FFF</td>
        <td class="dtSize">32KB</td>
        <td class="dtWaitState">?</td>
      </tr>
 
      <tr>
        <td class="dtName">DTCM</td>
        <td class="dtStart">0x0B000000</td>
        <td class="dtStop">0x0B003FFF</td>
        <td class="dtSize">16KB</td>
       <td class="dtWaitState">?</td>
      </tr>

       <tr>
        <td class="dtName">Shared WRAM Bank 0</td>
        <td class="dtStart">0x03000000</td>
        <td class="dtStop">0x03003FFF</td>
        <td class="dtSize">16KB</td>
       <td class="dtWaitState">?</td>
      </tr>

      <tr>
        <td class="dtName">Shared WRAM Bank 1</td>
        <td class="dtStart">0x03004000</td>
        <td class="dtStop">0x03007FFF</td>
        <td class="dtSize">16KB</td>
       <td class="dtWaitState">?</td>
      </tr>

  
      <tr><th colspan="5" class="innerHeader">ARM 7</th></tr>
      <tr>
        <td class="dtName">Main</td>
        <td class="dtStart">0x02000000</td>
        <td class="dtStop">0x023FFFFF</td>
        <td class="dtSize">4MB</td>
        <td class="dtWaitState">?</td>
       </tr>
 
      <tr>
        <td class="dtName">BIOS</td>
        <td class="dtStart">0x00000000</td>
        <td class="dtStop">0x00003FFF</td>
        <td class="dtSize">16KB</td>
        <td class="dtWaitState">?</td>
       </tr>
       
        <tr>
        <td class="dtName">IWRAM</td>
        <td class="dtStart">0x03800000</td>
        <td class="dtStop">0x0380FFFF</td>
        <td class="dtSize">64KB</td>
        <td class="dtWaitState">?</td>
       </tr>
       <tr>
        <td class="dtName">Shared WRAM Bank 0</td>
        <td class="dtStart">0x03000000</td>
        <td class="dtStop">0x03003FFF</td>
        <td class="dtSize">16KB</td>
       <td class="dtWaitState">?</td>
      </tr>

      <tr>
        <td class="dtName">Shared WRAM Bank 1</td>
        <td class="dtStart">0x03004000</td>
        <td class="dtStop">0x03007FFF</td>
        <td class="dtSize">16KB</td>
       <td class="dtWaitState">?</td>
      </tr>
 
 
 
      <tr><th colspan="5" class="innerHeader">Video RAM</th></tr>
  <tr>
        <td class="dtName">Main OAM</td>
        <td class="dtStart">0x07000000</td>
        <td class="dtStop">0x070003FF</td>
        <td class="dtSize">1KB</td>
       <td class="dtWaitState">?</td>
       </tr>
 <tr>
        <td class="dtName">Sub OAM</td>
        <td class="dtStart">0x07000400</td>
        <td class="dtStop">0x070007FF</td>
        <td class="dtSize">1KB</td>
       <td class="dtWaitState">?</td>
       </tr>
 <tr>
        <td class="dtName">Main Palette</td>
        <td class="dtStart">0x05000000</td>
        <td class="dtStop">0x050003FF</td>
        <td class="dtSize">1KB</td>
       <td class="dtWaitState">?</td>
       </tr>
 <tr>
        <td class="dtName">Sub Palette</td>
        <td class="dtStart">0x05000400</td>
        <td class="dtStop">0x050007FF</td>
        <td class="dtSize">1KB</td>
       <td class="dtWaitState">?</td>
       </tr>
      <tr>
        <td class="dtName">Bank A</td>
        <td class="dtStart">0x06800000</td>
        <td class="dtStop">0x0681FFFF</td>
        <td class="dtSize">128KB</td>
       <td class="dtWaitState">?</td>
       </tr>
  <tr>
        <td class="dtName">Bank B</td>
        <td class="dtStart">0x06820000</td>
        <td class="dtStop">0x0683FFFF</td>
        <td class="dtSize">128KB</td>
       <td class="dtWaitState">?</td>
       </tr>
 <tr>
        <td class="dtName">Bank C</td>
        <td class="dtStart">0x06840000</td>
        <td class="dtStop">0x0685FFFF</td>
        <td class="dtSize">128KB</td>
       <td class="dtWaitState">?</td>
       </tr>
 <tr>
        <td class="dtName">Bank D</td>
        <td class="dtStart">0x06860000</td>
        <td class="dtStop">0x0687FFFF</td>
        <td class="dtSize">128KB</td>
       <td class="dtWaitState">?</td>
       </tr>

  <tr>
        <td class="dtName">Bank E</td>
        <td class="dtStart">0x06880000</td>
        <td class="dtStop">0x0688FFFF</td>
        <td class="dtSize">64KB</td>
       <td class="dtWaitState">?</td>
       </tr>
 <tr>
        <td class="dtName">Bank F</td>
        <td class="dtStart">0x06890000</td>
        <td class="dtStop">0x06983FFF</td>
        <td class="dtSize">16KB</td>
       <td class="dtWaitState">?</td>
       </tr>
 <tr>
        <td class="dtName">Bank G</td>
        <td class="dtStart">0x06894000</td>
        <td class="dtStop">0x06897FFF</td>
        <td class="dtSize">16KB</td>
       <td class="dtWaitState">?</td>
       </tr>
 <tr>
        <td class="dtName">Bank H</td>
        <td class="dtStart">0x06898000</td>
        <td class="dtStop">0x0689FFFF</td>
        <td class="dtSize">32KB</td>
       <td class="dtWaitState">?</td>
       </tr>
 <tr>
        <td class="dtName">Bank I</td>
        <td class="dtStart">0x068A0000</td>
        <td class="dtStop">0x068A3FFF</td>
        <td class="dtSize">16KB</td>
       <td class="dtWaitState">?</td>
       </tr>
     
 
 
      <tr><th colspan="5" class="innerHeader">Virtual Video RAM</th></tr>
      <tr>
        <td class="dtName">Main Background</td>
        <td class="dtStart">0x06000000</td>
        <td class="dtStop">0x0607FFFF</td>
        <td class="dtSize">512KB</td>
       <td class="dtWaitState">?</td>
      </tr>
 
      <tr>
        <td class="dtName">Sub Background</td>
        <td class="dtStart">0x06200000</td>
        <td class="dtStop">0x0621FFFF</td>
        <td class="dtSize">128KB</td>
       <td class="dtWaitState"></td>
      </tr>
 
       <tr>
        <td class="dtName">Main Sprite</td>
        <td class="dtStart">0x06400000</td>
        <td class="dtStop">0x0643FFFF</td>
        <td class="dtSize">256KB</td>
       <td class="dtWaitState">?</td>
      </tr>
 
      <tr>
        <td class="dtName">Sub Sprite</td>
        <td class="dtStart">0x06600000</td>
        <td class="dtStop">0x0661FFFF</td>
        <td class="dtSize">128KB</td>
       <td class="dtWaitState">?</td>
      </tr> 
 
 
    </tbody></table>
</center>
<a name="Main_Memory"></a><h4><span class="editsection">[<a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/index.php?title=NDS/Tutorials_Day_2&amp;action=edit&amp;section=3" title="Edit section: Main Memory">edit</a>]</span> <span class="mw-headline">Main Memory</span></h4>
<pre>Start Address&nbsp;: 0x0200:0000 
End Address&nbsp;:   0x023F:FFFF 
Mirror&nbsp;:        0x0240:0000
</pre>
<p>Sometimes referred to simply as main memory, it is the 4 megabyte 
block of RAM which generally holds your ARM9 executable as well as the 
vast majority of all game data.   
</p><p>Both the ARM7 and the ARM9 can access this memory at any time.  
Any bus conflicts are delegated to the processor which has priority (the
 ARM7 by default but changeable via a control register) causing the 
other processor to wait until the first has finished its operation.
</p><p>Although it is possible to execute both ARM7 and ARM9 code from 
main RAM at the same time, devkitPro defaults to placing the ARM7 into 
the 64K of fast iwram for performance reasons.  Official games generally
 place both ARM7 and ARM9 executables into Main Memory after which the 
ARM7 copies the majority of its own code to iwram..
</p>
<a name="ARM_7_Fast_Ram_.28IWRAM.29"></a><h4><span class="editsection">[<a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/index.php?title=NDS/Tutorials_Day_2&amp;action=edit&amp;section=4" title="Edit section: ARM 7 Fast Ram (IWRAM)">edit</a>]</span> <span class="mw-headline">ARM 7 Fast Ram (IWRAM)</span></h4>
<pre>Start Address&nbsp;: 0x03800000
End Address&nbsp;:  0x0380FFFF  

</pre>
<p>The ARM7 has exclusive access to 64KB of fast 32 bit wide memory.  It
 is this region that contains the ARM7 executable and data.   When 
designing ARM7 code it will be in your interest to keep the binary 
small.
</p>
<a name="ARM_9_Caches"></a><h4><span class="editsection">[<a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/index.php?title=NDS/Tutorials_Day_2&amp;action=edit&amp;section=5" title="Edit section: ARM 9 Caches">edit</a>]</span> <span class="mw-headline">ARM 9 Caches</span></h4>
<p>The ARM9 contains both a data cache and an instruction cache.  
Although the operation of these caches is a bit complex and really out 
of scope for this document a few things are worth noting.
</p><p>Main memory is cacheable by default.  This means all data and 
code being accessed from main memory will be stored temporarily in the 
cache.  Because the DMA circuitry and the ARM7 do not have access to the
 cache often you will get unexpected results if you attempt to DMA from 
main memory or share data between ARM7 and ARM9 via main memory.
</p><p>To help utilize the cache effectively the mirror of main memory 
that begins above 0x02400000 is not cacheable.  There are also several 
functions provided by the library which allow you to flush the data 
cache and ensure main memory is in sync.
</p><p>Although the cache adds a certain level of complexity its boost to performance is well worth this small inconvenience.
</p>
<a name="Fast_Shared_Ram"></a><h4><span class="editsection">[<a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/index.php?title=NDS/Tutorials_Day_2&amp;action=edit&amp;section=6" title="Edit section: Fast Shared Ram">edit</a>]</span> <span class="mw-headline">Fast Shared Ram</span></h4>
<p>There are two small 16KB banks of fast 32 bit ram that can be 
assigned to the ARM7 or ARM9.  Access to either block by both CPUs at 
the same time is prohibited.  Commonly, both banks will be mapped to the
 ARM7 as they form a continuous block with ARM7 IWRAM effectively giving
 the ARM7 96KB of ram.
</p>
<a name="Video_Ram"></a><h3><span class="editsection">[<a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/index.php?title=NDS/Tutorials_Day_2&amp;action=edit&amp;section=7" title="Edit section: Video Ram">edit</a>]</span> <span class="mw-headline">Video Ram</span></h3>
<p>The Nintendo DS has nine banks of video memory which may be put to a 
variety of uses.  They can hold the graphics for your sprites, the 
textures for your 3D space ships, the tiles for your 2D platformer, or a
 direct map of pixels to render to the screen.  Figuring out how to 
effectively utilize this flexible but limited amount of memory will be 
one the most challenging endeavors you will face in your first few days 
of homebrew.
</p><p>Below is a table of the banks along with a description as to what
 uses they can be put.  You should not worry about understanding this at
 the moment but it might be handy to bookmark or print out for later 
use.
</p><p><a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/NDS/NDS_Tutorials_VramTable" title="NDS/NDS Tutorials VramTable">View large intimidating table</a>
</p>
<a name="Virtual_Video_Ram"></a><h3><span class="editsection">[<a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/index.php?title=NDS/Tutorials_Day_2&amp;action=edit&amp;section=8" title="Edit section: Virtual Video Ram">edit</a>]</span> <span class="mw-headline">Virtual Video Ram</span></h3>
<p>In order for the 2D systems to function they need RAM.  One of the 
major differences between the 2D graphics engine on the Gameboy Advanced
 and those on the DS is the DS has almost no memory dedicated to the 2D 
system.  Instead of setting aside a given amount of video memory for the
 2D system it allows you to map the video RAM banks into 2D engine 
memory space.
</p><p>This might be a bit difficult to grasp at first.  An example might be helpful.
</p><p>Scenario:  You want to render a tile based map to the screen using the main 2D graphics engine.  
</p><p>Because you are an uber Nintendo DS programmer you already know two things:
</p>
<ol><li>Where the 2D graphics engine expects the map and tile data to be
</li><li>What video RAM banks can be mapped to this “virtual” 2D graphics memory to hold your tiles and map.
</li></ol>
<p>Solution: Tell the Nintendo DS to map a <a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/NDS/NDS_Tutorials_VramTable" title="NDS/NDS Tutorials VramTable">video RAM bank</a>
 to the right place...in this case we might map video RAM bank A 
(VRAM_A) to 0x6000000 for use as 2D background memory but we could have 
chosen another bank (turns out almost all vram banks can be mapped to 
main background memory).
</p>
<pre class="cpp">videoSetBankA<span style="color: #000000;">(</span>VRAM_A_MAIN_BG_0x6000000<span style="color: #000000;">)</span>;
&nbsp;</pre>
<p>We will revisit this topic when we create our first few 2D demos.
</p><p>This might seem intimidating and difficult at first, but it does 
offer you a fair bit of flexibility and power over where everything is.
</p>
<a name="Sound_Hardware"></a><h3><span class="editsection">[<a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/index.php?title=NDS/Tutorials_Day_2&amp;action=edit&amp;section=9" title="Edit section: Sound Hardware">edit</a>]</span> <span class="mw-headline">Sound Hardware</span></h3>
<p>What would a game be without its compliment of blips, bleeps, and chip tunes?  
</p><p>Sound and music are an important piece of any good game and to 
ensure your next graphical adventure is accompanied by an equally 
astounding audio experience the DS comes equipped with some impressive 
hardware.
</p><p>16 independent audio channels can pump digitized music in 8 bit, 
16 bit, or ADPCM format.  Each channel has its own frequency, volume, 
panning, and looping controls allowing for virtually CPU free <a href="http://web.archive.org/web/20101215215139/http://www.modarchive.com/" class="external text" title="http://www.modarchive.com/" rel="nofollow">MOD</a> quality playback.
</p>
<a name="Wifi"></a><h3><span class="editsection">[<a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/index.php?title=NDS/Tutorials_Day_2&amp;action=edit&amp;section=10" title="Edit section: Wifi">edit</a>]</span> <span class="mw-headline">Wifi</span></h3>
<p>What is there to say but that it supports communication with 802.11 
standard access points. A full socket library has been implemented which
 allows porting of PC network code to the DS.
</p>
<a name="Input"></a><h3><span class="editsection">[<a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/index.php?title=NDS/Tutorials_Day_2&amp;action=edit&amp;section=11" title="Edit section: Input">edit</a>]</span> <span class="mw-headline">Input</span></h3>
<p>User input is where the DS excels and is the basis for its much 
lauded inventive game play.  8 Buttons, 4 direction D-Pad, Touch screen,
 and microphone make for an interesting mix of possibilities.
</p>
<a name="Touch_Screen"></a><h4><span class="editsection">[<a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/index.php?title=NDS/Tutorials_Day_2&amp;action=edit&amp;section=12" title="Edit section: Touch Screen">edit</a>]</span> <span class="mw-headline">Touch Screen</span></h4>
<p>As I am sure you have already noticed the DS has a touchpad.  It is 
very standard in operation and communicates to the DS via a serial 
interface to the ARM7.  Using the default ARM7 binary from libnds causes
 the touch screen values to be read once per frame and reported to an 
area you can reach with the ARM9.
</p><p>In the next chapter we will cover how to access the touchpad values in code.
</p>
<a name="Buttons"></a><h4><span class="editsection">[<a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/index.php?title=NDS/Tutorials_Day_2&amp;action=edit&amp;section=13" title="Edit section: Buttons">edit</a>]</span> <span class="mw-headline">Buttons</span></h4>
<p>Button presses are detected by reading registers on the ARM7 and 
ARM9.  Some buttons are only detectable by the ARM7: the door 
open-close, the X and Y buttons, and the pen down “button” are all 
detected on the ARM7 and recorded in shared Main Memory for access by 
the ARM9.
</p><p>Our first example demo in the <a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/NDS/Tutorials_Day_3" class="external text" title="http://dev-scene.com/NDS/Tutorials_Day_3" rel="nofollow">next chapter</a> will include ways to read the buttons.
</p>
<a name="Microphone"></a><h4><span class="editsection">[<a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/index.php?title=NDS/Tutorials_Day_2&amp;action=edit&amp;section=14" title="Edit section: Microphone">edit</a>]</span> <span class="mw-headline">Microphone</span></h4>
<p>Perhaps one of the most interesting additions to the Nintendo DS was 
the inclusion of a microphone.  I have not played with it much to be 
honest but many interesting ideas come to mind and we will defiantly do a
 demo or two which captures input from the microphone.
</p>
<a name="Real-Time_Clock"></a><h3><span class="editsection">[<a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/index.php?title=NDS/Tutorials_Day_2&amp;action=edit&amp;section=15" title="Edit section: Real-Time Clock">edit</a>]</span> <span class="mw-headline">Real-Time Clock</span></h3>
<p>Being able to know what time it is to the second is pretty handy.  
Your game can respond differently based on the time of day, you can tell
 how long it has been since the player last played the game, or it can 
be used as simple in-game clock.  And best of all, reading the date and 
time is a snap.
</p>
<a name="Upgradeable_Firmware"></a><h2><span class="editsection">[<a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/index.php?title=NDS/Tutorials_Day_2&amp;action=edit&amp;section=16" title="Edit section: Upgradeable Firmware">edit</a>]</span> <span class="mw-headline"><b>Upgradeable Firmware</b></span></h2>
<p>The firmware on the Nintendo DS is stored in flash memory.  It can be
 overwritten with custom firmware.  For more information on how to 
achieve this check <a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/index.php?title=NDS_Flashme_Guide&amp;action=edit" class="new" title="NDS Flashme Guide">here</a>
</p><p>Upgrading the firmware is useful to developers because it allows  you bypass the RSA check when downloading <a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/index.php?title=DSWifiDemos&amp;action=edit" class="new" title="DSWifiDemos">wifi demos</a>.
  This means we can send our own .nds files to our DS via Wifi instead 
of just officially signed ones.  Also, the hacked firmware will check 
the GBA slot prior to booting.  If it finds an .nds file signature it 
will execute the code automatically eliminating the need to use a 
passthrough based device each time you wish to run code from your GBA 
cart-based flash cart.
</p><p>If you currently use a <a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/index.php?title=Passthrough&amp;action=edit" class="new" title="Passthrough">passthrough</a> device to boot your .nds files from the GBA slot, upgrading the firmware is an easy and relatively safe process.
</p>
<a name="Graphics_Overview"></a><h2><span class="editsection">[<a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/index.php?title=NDS/Tutorials_Day_2&amp;action=edit&amp;section=17" title="Edit section: Graphics Overview">edit</a>]</span> <span class="mw-headline"><b>Graphics Overview</b></span></h2>
<p>Believe it or not, the Nintendo DS is a very capable very advanced 
graphics power house.  It has an interesting combination of 2D and 3D 
rendering hardware.  
</p>
<a name="2D"></a><h3><span class="editsection">[<a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/index.php?title=NDS/Tutorials_Day_2&amp;action=edit&amp;section=18" title="Edit section: 2D">edit</a>]</span> <span class="mw-headline">2D</span></h3>
<p>The Super Nintendo is considered by many to be the best 2D console 
ever made (by many I really mean me…nobody else counts).  SNES possessed
 a 16-bit 3.58Mhz processor, 128KB of 8 bit ram and 64KB of video ram.  
By comparison the Nintendo DS has a 32-bit 66Mhz processor, 4MB of main 
ram, and 656KB of video ram and that’s not counting all its little 
caches of fast 32 bit ram nor its second 33Mhz processor.  This is a 
very capable machine.
</p><p>There are two separate graphics cores on the DS.  They are 
referred to as Main and Sub graphics cores. Each core has similar 
features which vary depending on their mode of operation.  The major 
differences between the cores are as follows:
</p>
<ul><li>The main core has two extra modes which are capable of rendering large bitmaps.
</li><li>The main core can give up one of its background layers to the 3D engine.
</li><li>The main core can bypass the 2D engine and render from memory 
to the screen directly in what is often referred to as frame buffer 
mode.
</li></ul>
<p>As alluded to above, each core operates in one of several modes.  Below is a table of these modes.
</p>
<center>
<table class="dovstable">
      <caption>Graphics Modes</caption>
  
       <tbody><tr><th colspan="5" class="innerHeader">Main 2D Engine</th></tr>
       <tr style="bold">
        <td class="dtMode">Mode</td>
        <td class="dtBG0">BG0</td>
        <td class="dtBG1">BG1</td>
        <td class="dtBG2">BG2</td>
        <td class="dtBG3">BG3</td>
       </tr>
     
       <tr>
        <td class="dtMode">Mode 0</td>
        <td class="dtBG0">Text/3D</td>
        <td class="dtBG1">Text</td>
        <td class="dtBG2">Text</td>
        <td class="dtBG3">Text</td>
       </tr>
       
       <tr>
        <td class="dtMode">Mode 1</td>
        <td class="dtBG0">Text/3D</td>
        <td class="dtBG1">Text</td>
        <td class="dtBG2">Text</td>
        <td class="dtBG3">Rotation</td>
       </tr>

<tr>
        <td class="dtMode">Mode 2</td>
        <td class="dtBG0">Text/3D</td>
        <td class="dtBG1">Text</td>
        <td class="dtBG2">Rotation</td>
        <td class="dtBG3">Rotation</td>
       </tr>

<tr>
        <td class="dtMode">Mode 3</td>
        <td class="dtBG0">Text/3D</td>
        <td class="dtBG1">Text</td>
        <td class="dtBG2">Text</td>
        <td class="dtBG3">Extended</td>
       </tr>

<tr>
        <td class="dtMode">Mode 4</td>
        <td class="dtBG0">Text/3D</td>
        <td class="dtBG1">Text</td>
        <td class="dtBG2">Rotation</td>
        <td class="dtBG3">Extended</td>
       </tr>

<tr>
        <td class="dtMode">Mode 5</td>
        <td class="dtBG0">Text/3D</td>
        <td class="dtBG1">Text</td>
        <td class="dtBG2">Extended</td>
        <td class="dtBG3">Extended</td>
       </tr>
<tr>
        <td class="dtMode">Mode 6</td>
        <td class="dtBG0">3D</td>
        <td class="dtBG1">-</td>
        <td class="dtBG2">Large Bitmap</td>
        <td class="dtBG3">-</td>
       </tr>
<tr>
        <td class="dtMode">Frame Buffer</td>
        <td colspan="4" class="dtBG0">Direct VRAM display as a bitmap</td>
               </tr>
       <tr><th colspan="5" class="innerHeader">Sub 2D Engine</th></tr>
       <tr style="bold">
        <td class="dtMode">Mode</td>
        <td class="dtBG0">BG0</td>
        <td class="dtBG1">BG1</td>
        <td class="dtBG2">BG2</td>
        <td class="dtBG3">BG3</td>
       </tr>
            <tr>
        <td class="dtMode">Mode 0</td>
        <td class="dtBG0">Text</td>
        <td class="dtBG1">Text</td>
        <td class="dtBG2">Text</td>
        <td class="dtBG3">Text</td>
       </tr>
       
       <tr>
        <td class="dtMode">Mode 1</td>
        <td class="dtBG0">Text</td>
        <td class="dtBG1">Text</td>
        <td class="dtBG2">Text</td>
        <td class="dtBG3">Rotation</td>
       </tr>

<tr>
        <td class="dtMode">Mode 2</td>
        <td class="dtBG0">Text</td>
        <td class="dtBG1">Text</td>
        <td class="dtBG2">Rotation</td>
        <td class="dtBG3">Rotation</td>
       </tr>

<tr>
        <td class="dtMode">Mode 3</td>
        <td class="dtBG0">Text</td>
        <td class="dtBG1">Text</td>
        <td class="dtBG2">Text</td>
        <td class="dtBG3">Extended</td>
       </tr>

<tr>
        <td class="dtMode">Mode 4</td>
        <td class="dtBG0">Text</td>
        <td class="dtBG1">Text</td>
        <td class="dtBG2">Rotation</td>
        <td class="dtBG3">Extended</td>
       </tr>

<tr>
        <td class="dtMode">Mode 5</td>
        <td class="dtBG0">Text</td>
        <td class="dtBG1">Text</td>
        <td class="dtBG2">Extended</td>
        <td class="dtBG3">Extended</td>
       </tr>
</tbody></table>
</center>
<p>Text backgrounds are general purpose tiled backgrounds; rotation 
backgrounds are also tiled and can be rotated and scaled.  Extended 
rotation backgrounds support a larger set of tiles (at the expense of a 
larger map), support more palettes, and can operate in a bitmap mode as 
well as tiled modes.
</p><p><br>
These modes and background types will be explored as we go along.
</p>
<a name="3D"></a><h3><span class="editsection">[<a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/index.php?title=NDS/Tutorials_Day_2&amp;action=edit&amp;section=19" title="Edit section: 3D">edit</a>]</span> <span class="mw-headline">3D</span></h3>
<p>It may not posses the poly pushing, texture blending, hardware pixel 
shading capabilities of the current generation GPUs but where the 
Nintendo DS lacks in performance and eye candy it excels in features.
</p><p>Limited to 6144 vertexes per frame (about 2048 triangles or 1536 
quads) the 3D system might seem a bit sparse.  But given the small 
screen size a lot can be done with even this small number of available 
points.  
</p><p>Hardware fog, lighting, and transformation along with non 
blending texture mapping, toon-shading, and edge anti-aliasing make up a
 rather impressive set of features for an otherwise lackluster 3D 
machine.
</p><p>The 3D core operates as a very openGL like state machine allowing
 much of its functionality to be wrapped in gl compliant code.  One 
major difference between open gl and the DS core is the absence of 
floating point number support.  All operations on the DS are carried out
 in fixed point precision.
</p><p>If you want to get a jump on 3D look at the 3D examples included with libnds and the <a href="http://web.archive.org/web/20101215215139/http://nehe.gamedev.net/" class="external text" title="http://nehe.gamedev.net" rel="nofollow">NeHe</a> tutorials the source code originated from.
</p>
<a name="Toolchain_Explained"></a><h2><span class="editsection">[<a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/index.php?title=NDS/Tutorials_Day_2&amp;action=edit&amp;section=20" title="Edit section: Toolchain Explained">edit</a>]</span> <span class="mw-headline"><b>Toolchain Explained</b></span></h2>
<p>Understanding how your code goes from being a text file to being 
executed on the Nintendo DS will become very important as your projects 
progress in complexity.  To aid in that understanding we are going to 
recreate <a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/index.php?title=NDS_Tutorials_Day_1&amp;action=edit" class="new" title="NDS Tutorials Day 1">Demo 1</a> from scratch and build it step by step from the command line.
</p><p>Before we begin there are a few terms you are likely familiar with but I feel necessary to go on about anyway.  
</p>
<a name="Compiler"></a><h3><span class="editsection">[<a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/index.php?title=NDS/Tutorials_Day_2&amp;action=edit&amp;section=21" title="Edit section: Compiler">edit</a>]</span> <span class="mw-headline">Compiler</span></h3>
<p>The compiler is the first tool you pass your C source through. It is 
responsible for interpreting that code and translating it into machine 
based assembly language.  From there the assembly language is further 
reduced into its binary machine code equivalent by another tool known as
 the assembler (which the compiler will call for you).
</p><p>The output of the compiler is generally not executable but is 
instead in what is known as an object file format.  Although the 
instructions have been translated to machine code binary, the decisions 
about where that code and associated data is to be physically placed in 
memory have been left undecided.
</p>
<a name="Linker"></a><h3><span class="editsection">[<a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/index.php?title=NDS/Tutorials_Day_2&amp;action=edit&amp;section=22" title="Edit section: Linker">edit</a>]</span> <span class="mw-headline">Linker</span></h3>
<p>The tool used to combine the object files and determine physical 
addressing such that functions from a multitude of object files can 
operate in a coherent fashion is called the linker.  By passing your 
object files to the linker you can produce an executable binary file.
</p><p>Because the linker is responsible for determining where things 
should be placed physically within the NDS system it must be told a fair
 amount of information about the memory layout of the DS.  This 
description is located in a linkscript file which describes both the 
memory layout of the DS and the way in which we want the different 
regions of our code to map to it.  Here is a small piece of the 
devkitARM default linkscript for the arm9 (yes there is a separate one 
for the arm7 since it has a different memory layout).
</p>
<pre class="cpp"> OUTPUT_FORMAT<span style="color: #000000;">(</span><span style="color: #666666;">"elf32-littlearm"</span>, <span style="color: #666666;">"elf32-bigarm"</span>, <span style="color: #666666;">"elf32-littlearm"</span><span style="color: #000000;">)</span>
 OUTPUT_ARCH<span style="color: #000000;">(</span>arm<span style="color: #000000;">)</span>
 ENTRY<span style="color: #000000;">(</span>_start<span style="color: #000000;">)</span>
&nbsp;
 MEMORY <span style="color: #000000;">{</span>
&nbsp;
 	rom	: ORIGIN = 0x08000000, LENGTH = 32M
 	ewram	: ORIGIN = 0x02000000, LENGTH = 4M - 4k
 	dtcm	: ORIGIN = 0x0b000000, LENGTH = 16K
	itcm	: ORIGIN = 0x01000000, LENGTH = 32K
<span style="color: #000000;">}</span>
&nbsp;
__itcm_start	=	ORIGIN<span style="color: #000000;">(</span>itcm<span style="color: #000000;">)</span>;
__ewram_end	=	ORIGIN<span style="color: #000000;">(</span>ewram<span style="color: #000000;">)</span> + LENGTH<span style="color: #000000;">(</span>ewram<span style="color: #000000;">)</span>;
__eheap_end	=	ORIGIN<span style="color: #000000;">(</span>ewram<span style="color: #000000;">)</span> + LENGTH<span style="color: #000000;">(</span>ewram<span style="color: #000000;">)</span>;
__dtcm_start	=	ORIGIN<span style="color: #000000;">(</span>dtcm<span style="color: #000000;">)</span>;
__dtcm_top	=	ORIGIN<span style="color: #000000;">(</span>dtcm<span style="color: #000000;">)</span> + LENGTH<span style="color: #000000;">(</span>dtcm<span style="color: #000000;">)</span>;
__irq_flags	=	__dtcm_top - 0x08;
__irq_vector	=	__dtcm_top - 0x04;
&nbsp;
__sp_svc	=	__dtcm_top - 0x100;
__sp_irq	=	__sp_svc - 0x100;
__sp_usr	=	__sp_irq - 0x100;
&nbsp;</pre>
<p>There is much more to this script; most of which is utterly 
incomprehensible and any of which can have extremely difficult to 
understand consequences if muddled with.  It is good to understand these
 scripts do exist and their general purpose, but actually editing them 
is well beyond the scope of this document. 
</p><p>The snipit above was chosen because it is somewhat 
comprehensible; it describes the 4 primary memory regions of the DS that
 will be used to contain code and data.  
</p>
<ul><li>rom is the GBA cartridge space; it is 32MB in size and begins at an absolute address of 0x8000000
</li><li>ewram is external working ram and is the slow 4MB of main memory for the DS.
</li><li>dtcm stands for data tightly coupled memory and is a special 
area of memory on the ARM9 intended for use as fast data memory. The 
standard link script places the stack in this area. dtcm is a mere 16k 
so be careful with those local variables.
</li><li>itcm stands for instruction tightly coupled memory and is 
another special area intended for use as fast instruction memory. This 
area is 32k and may be used for small functions which need to be fast. 
libnds uses this area for the interrupt dispatcher.
</li></ul>
<p>The rest of the script file deals with mapping of your code to these 
regions (read only data, code, variables, stack, global data, 
constructors for C++ stuff, etc).  It does this using an obscure and 
rather intimidating expression type language that I will not even 
pretend to understand completely.  Fortunately a few people like <a href="http://web.archive.org/web/20101215215139/http://devkitadv.sourceforge.net/" class="external text" title="http://devkitadv.sourceforge.net" rel="nofollow">Jason Wilkins</a>, <a href="http://web.archive.org/web/20101215215139/http://www.devrs.com/" class="external text" title="http://www.devrs.com" rel="nofollow">Jeff Frohwein</a>, and most recently (and most successfully) <a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/User:WinterMute" title="User:WinterMute">Dave Murphy</a>
 have done the grunt work; what was once something which caused 
countless "interesting" issues can now be relied upon confidently to 
just work.
</p><p>Generally speaking there is no need to worry about the 
linkerscript unless you have some pressing need to change where things 
go in memory. Everything except the stack goes in main memory by default
 so all you have to worry about is fitting everything into 4meg.
</p>
<a name="Build_A_Demo_The_Hard_Way"></a><h3><span class="editsection">[<a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/index.php?title=NDS/Tutorials_Day_2&amp;action=edit&amp;section=23" title="Edit section: Build A Demo The Hard Way">edit</a>]</span> <span class="mw-headline">Build A Demo The Hard Way</span></h3>
<p>To sum things up you first compile your source files into object 
files and then link them into a binary executable.  Normally this would 
be the end of the process but, alas, our little DS is a bit more complex
 as it has not one but two processors and each need their own separate 
binary executable.
</p><p>What are we to do?  Create both of course.  The process is 
identical with the only difference being we use the linkscript for ARM7 
when linking the arm7 object files.
</p><p>The final step in the process is packaging the binaries into a single file that we can then load onto the DS.  Fortunately <a href="http://web.archive.org/web/20101215215139/http://www.df.net/" class="external text" title="http://www.df.net" rel="nofollow">Darkfader</a> has created a tool for us (included in the <a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/DevkitPro" title="DevkitPro">devkitPro</a>
 package) which does just this.  Official NDS game carts happen to use a
 file format which suites our needs rather well.  This format includes a
 small header with an embedded logo and a short description of the .nds 
file in several languages, followed eventually by the executable 
binaries for the arm7 and arm9. The included logo and description text 
shows up when you boot a game card from the firmware or start to 
download one over wireless multiboot.  (After a bit of investigation it 
turns out the logo is not actually embedded in the header but exists 
separately...it is however pointed to by the header)
</p><p>Now that we have a feel for the process let us create a full .nds
 file from the command line (so we can confidently never do it again).
</p><p>Okay…one quick thing to mention.  When we created demo1 you may 
have noticed we had no arm7 code in the project.  The reason we are able
 to get away with this is there is an arm7 executable binary already 
present in the devkitPro package that you can include by default.  This 
binary performs some very basic things such as read the touch pad and 
real time clock as well as some very simple sound playback.  For 
anything more advanced you will be providing your own arm7 code or at 
least modifying the supplied code.
</p><p>Now…on to the demo.  Follow the instructions from <a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/NDS/Tutorials_Day_1" title="NDS/Tutorials Day 1">Day 1</a> on building your first demo with the following exception:  Instead of grabbing the arm9 template grab the template labeled <b>combined</b>.  Within you will find an <b>arm9</b> folder and an <b>arm7</b> folder.  Replace the code in the <b>template.c</b>
 inside the arm9 folder with the demo1 code (or leave it the same as it 
does not really matter what we compile for this exercise).
</p><p>You will notice a makefile inside the <b>combined</b> directory. 
 If you were to navigate to that directory in a Dos/terminal window (try
 this now in fact), you could simply type make and the scripts contained
 inside the makefile would do all the steps we are about to do by hand.
</p><p>Here are the commands needed to build the nds file from the command line.
</p>
<center>
<p><a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/Image:Dov_Demo1_hard.png" class="image" title="Image:Dov_Demo1_hard.png"><img alt="Image:Dov_Demo1_hard.png" longdesc="/Image:Dov_Demo1_hard.png" src="NDS_Tutorials%20Day%202%20-%20Dev-Scene_files/Dov_Demo1_hard.html" height="292" width="806"></a>
</p>
</center>
<p>Before we explain what is going on it is best to take a moment and absorb just how much compiling from the command line sucks…
</p><p>Good, now that we know let us figure out what we did.
</p><p>What is not shown is me setting my path so that the devkitARM tools could be found. On windows this is simply:
</p><p><b>PATH=c:/devkitpro/devkitarm/bin</b>
</p><p>First we invoked the compiler on the arm9 template.c file.  This 
translated it into an object file (template.o).  We passed it the file 
as an argument as well as the include directory for the libnds header 
files we are using.  Because libnds does different things depending on 
if you are constructing an arm7 or an arm9 binary we must define ARM9 
with the –D option.
</p><p>Next we link the file into an executable (.elf file).  We pass 
the object file as an argument, we tell it we would like to include 
libnds (-lnds) and then we tell it where to look for the linkscript and 
what default libraries to use (-specs=ds_arm9.specs).
</p><p>Because our loader does not handle the .elf format very easily we
 strip away all that extra info using objcopy.  This leaves with a nice 
flat binary for execution. (the .elf file contains debug information and
 other things which are useful; you will need the .elf file to use the 
remote debugger or the source level debugger in no$gba if you can afford
 such luxuries).
</p><p>This entire process is repeated for the arm7 leaving us with an 
arm7.bin and an arm9.bin.  We next combine these binaries into an .nds 
file using ndstool.
</p><p>If there is anything you should take from all this it is the 
convenience of the template makefiles.  All you do is drop .c/.cpp/.s 
files into the source directories for the processors, .h files into the 
include directories and .bin data files into the data directory (more on
 this when we talk about getting your data into your program) and type <b>make</b>.
  The script will automate this entire process in an efficient and easy 
to use fashion which reduces the entire painful process of above into 
the single command: <b>make</b>.
</p>
<a name="Conclusion"></a><h3><span class="editsection">[<a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/index.php?title=NDS/Tutorials_Day_2&amp;action=edit&amp;section=24" title="Edit section: Conclusion">edit</a>]</span> <span class="mw-headline">Conclusion</span></h3>
<p>Today we took a short peek at the capabilities of the DS and learned a
 bit more detail on the process of creating executable from code.  Much 
of the hardware descriptions were intentionally vague as the real detail
 will come in the following chapters.
</p><p>Tomorrow we will begin looking at the hardware in detail when we explore raster graphics.
</p>
<!-- Saved in parser cache with key devscene_DSWiki:pcache:idhash:2535-0!1!0!!en!2 and timestamp 20101124024445 -->
<div class="printfooter">
Retrieved from "<a href="http://web.archive.org/web/20101215215139/http://dev-scene.com/NDS/Tutorials_Day_2">http://dev-scene.com/NDS/Tutorials_Day_2</a>"</div>
						<!-- end content -->
<center>Dev-Scene (c) Ashley "MrShlee" Hull.</center><br>
<script type="text/javascript"><!--
google_ad_client = "pub-3502926109885944";
google_ad_width = 728;
google_ad_height = 90;
google_ad_format = "728x90_as";
google_ad_type = "text_image";
//2007-05-22: Dev-Scene
google_ad_channel = "2197235294";
google_color_border = "FFFFFF";
google_color_bg = "FFFFFF";
google_color_link = "0000FF";
google_color_text = "000000";
google_color_url = "008000";
//-->
</script>
<script type="text/javascript" src="NDS_Tutorials%20Day%202%20-%20Dev-Scene_files/show_ads.js">
</script><script src="NDS_Tutorials%20Day%202%20-%20Dev-Scene_files/show_ads_impl.js"></script>
</div><!-- end of MAINCONTENT div -->	

	</div><!-- end of MBODY div -->


</div><!-- end of the CONTAINER div -->

<!-- Served by host300.hostmonster.com in 0.457 secs. -->




</body><!-- Cached 20101124024445 --></html>
<!--
     FILE ARCHIVED ON 21:51:39 Dec 15, 2010 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 02:21:46 Jul 07, 2018.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  LoadShardBlock: 135.277 (3)
  esindex: 0.007
  captures_list: 291.202
  CDXLines.iter: 11.864 (3)
  PetaboxLoader3.datanode: 136.61 (4)
  exclusion.robots.fetch: 121.023 (4)
  exclusion.robots: 121.574
  exclusion.robots.policy: 0.306
  RedisCDXSource: 17.421
  PetaboxLoader3.resolve: 848.321
  load_resource: 929.219
-->